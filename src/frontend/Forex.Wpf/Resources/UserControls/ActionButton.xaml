<UserControl
    x:Class="Forex.Wpf.Resources.UserControls.ActionButton"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Width="Auto"
    Height="Auto"
    MinWidth="24"
    MinHeight="24">
    <Grid>
        <!--  3 nuqta tugma  -->
        <Button
            x:Name="DotsButton"
            Margin="0"
            Padding="0"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Background="Transparent"
            BorderThickness="0"
            Click="DotsButton_Click"
            Content="⋮"
            Focusable="False"
            FontSize="14" />

        <!--  Popup  -->
        <Popup
            x:Name="ActionPopup"
            AllowsTransparency="True"
            HorizontalOffset="-15"
            Placement="Center"
            PlacementTarget="{Binding ElementName=DotsButton}"
            PopupAnimation="Fade"
            StaysOpen="False">

            <Border Background="#01FFFFFF">
                <StackPanel
                    DataContext="{Binding CommandParameter, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Orientation="Horizontal"
                    RenderTransformOrigin="0.5,0.5">
                    <StackPanel.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform x:Name="stackScale" ScaleX="0" ScaleY="0" />
                            <TranslateTransform x:Name="stackTranslate" X="0" />
                        </TransformGroup>
                    </StackPanel.RenderTransform>

                    <!--  Edit  -->
                    <Button
                        x:Name="EditButton"
                        Click="EditButton_Click"
                        Command="{Binding EditCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        CommandParameter="{Binding}"
                        Content="✏️"
                        Focusable="False"
                        IsTabStop="False"
                        Style="{StaticResource ContextMenuButtonStyle}"
                        Visibility="{Binding IsEditing, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource InverseBoolToVisibilityConverter}}" />

                    <!--  Save  -->
                    <Button
                        x:Name="SaveButton"
                        Click="SaveButton_Click"
                        Command="{Binding SaveCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        CommandParameter="{Binding}"
                        Content="💾"
                        Focusable="False"
                        IsTabStop="False"
                        Style="{StaticResource ContextMenuButtonStyle}"
                        Visibility="{Binding IsEditing, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BoolToVisibilityConverter}}" />

                    <!--  Delete  -->
                    <Button
                        Command="{Binding DeleteCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        CommandParameter="{Binding}"
                        Content="🗑️"
                        Focusable="False"
                        IsTabStop="False"
                        Style="{StaticResource ContextMenuButtonStyle}" />
                </StackPanel>
            </Border>
        </Popup>
    </Grid>
</UserControl>
