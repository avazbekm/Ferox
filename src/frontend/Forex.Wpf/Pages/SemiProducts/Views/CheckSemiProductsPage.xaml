<Page
    x:Class="Forex.Wpf.Pages.SemiProducts.Views.CheckSemiProductsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:vm="clr-namespace:Forex.Wpf.Pages.SemiProducts.ViewModels"
    Title="CheckSemiProductsPage"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <Border Background="{StaticResource PrimaryBackground}" CornerRadius="4">


        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <!--  == Jadval ==  -->
                <RowDefinition Height="Auto" />
                <!--  == Tugma ==  -->
            </Grid.RowDefinitions>

            <Border
                Grid.Row="1"
                Background="#EEE"
                BorderBrush="Gray"
                BorderThickness="1"
                CornerRadius="4">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <!--  Header  -->
                        <RowDefinition Height="*" />
                        <!--  Content  -->
                        <RowDefinition Height="Auto" />
                        <!--  Footer  -->
                    </Grid.RowDefinitions>
                    <Border
                        Padding="2"
                        BorderBrush="Gray"
                        BorderThickness="0,0,0,1">
                        <Grid Margin="15,0" Background="#EEE">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition MinWidth="100" MaxWidth="200" />
                                <!--  == Surat ==  -->

                                <ColumnDefinition Width="*" />
                                <!--  == Qolgan ma'lumotlar ==  -->
                            </Grid.ColumnDefinitions>

                            <TextBlock
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontWeight="Bold"
                                Text="Surat" />

                            <Grid Grid.Column="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="100" />
                                    <!--  == O'lchami ==  -->

                                    <ColumnDefinition Width="*" />
                                    <!--  == Qolgan ma'lumotlar ==  -->
                                </Grid.ColumnDefinitions>

                                <TextBlock
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Text="O'lchami" />

                                <Grid Grid.Column="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <!--  == Soni ==  -->

                                        <ColumnDefinition Width="*" />
                                        <!--  == Birligi ==  -->

                                        <ColumnDefinition Width="*" />
                                        <!--  == Birlik narxi ==  -->

                                        <ColumnDefinition Width="*" />
                                        <!--  == Jami summa ==  -->
                                    </Grid.ColumnDefinitions>

                                    <TextBlock
                                        HorizontalAlignment="Center"
                                        FontWeight="Bold"
                                        Text="Soni" />

                                    <TextBlock
                                        Grid.Column="1"
                                        HorizontalAlignment="Center"
                                        FontWeight="Bold"
                                        Text="Birligi" />

                                    <TextBlock
                                        Grid.Column="2"
                                        HorizontalAlignment="Center"
                                        FontWeight="Bold"
                                        Text="Birlik narxi" />

                                    <TextBlock
                                        Grid.Column="3"
                                        HorizontalAlignment="Center"
                                        FontWeight="Bold"
                                        Text="Jami summa" />
                                </Grid>
                            </Grid>
                        </Grid>
                    </Border>

                    <ScrollViewer
                        Grid.Row="1"
                        Focusable="False"
                        IsTabStop="False"
                        VerticalScrollBarVisibility="Auto">
                        <StackPanel
                            Grid.Row="1"
                            Margin="0"
                            Focusable="False"
                            Orientation="Vertical">
                            <ItemsControl
                                Grid.Row="1"
                                Focusable="False"
                                IsTabStop="False"
                                ItemsSource="{Binding Products}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border
                                            Margin="5"
                                            Padding="5"
                                            BorderBrush="Gray"
                                            BorderThickness="1"
                                            Focusable="False">
                                            <Grid Focusable="False">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition MinWidth="100" MaxWidth="200" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <!--  Image  -->
                                                <Image HorizontalAlignment="Center" Source="{Binding Image, Converter={StaticResource ImageFallbackConverter}}" />

                                                <!--  Types  -->
                                                <DataGrid
                                                    Grid.Column="1"
                                                    MinHeight="50"
                                                    AutoGenerateColumns="False"
                                                    CanUserAddRows="False"
                                                    GridLinesVisibility="All"
                                                    HeadersVisibility="None"
                                                    IsHitTestVisible="False"
                                                    IsReadOnly="True"
                                                    IsTabStop="False"
                                                    ItemsSource="{Binding ProductTypes}">

                                                    <DataGrid.Columns>
                                                        <DataGridTextColumn Width="100" Binding="{Binding Type}">

                                                            <DataGridTextColumn.ElementStyle>
                                                                <Style TargetType="TextBlock">
                                                                    <Setter Property="VerticalAlignment" Value="Center" />
                                                                    <Setter Property="HorizontalAlignment" Value="Center" />
                                                                </Style>
                                                            </DataGridTextColumn.ElementStyle>
                                                        </DataGridTextColumn>

                                                        <DataGridTemplateColumn Width="*">
                                                            <DataGridTemplateColumn.CellTemplate>
                                                                <DataTemplate>
                                                                    <DataGrid
                                                                        AutoGenerateColumns="False"
                                                                        CanUserAddRows="False"
                                                                        GridLinesVisibility="None"
                                                                        HeadersVisibility="None"
                                                                        IsReadOnly="True"
                                                                        IsTabStop="False"
                                                                        ItemsSource="{Binding ProductTypeItems}">
                                                                        <DataGrid.Resources>
                                                                            <Style x:Key="CenteredTextBlockStyle" TargetType="TextBlock">
                                                                                <Setter Property="HorizontalAlignment" Value="Center" />
                                                                                <Setter Property="VerticalAlignment" Value="Center" />
                                                                            </Style>
                                                                        </DataGrid.Resources>

                                                                        <DataGrid.Columns>
                                                                            <DataGridTextColumn
                                                                                Width="*"
                                                                                Binding="{Binding SemiProduct.Quantity}"
                                                                                ElementStyle="{StaticResource CenteredTextBlockStyle}" />
                                                                            <DataGridTextColumn
                                                                                Width="*"
                                                                                Binding="{Binding SemiProduct.Measure.Name}"
                                                                                ElementStyle="{StaticResource CenteredTextBlockStyle}" />
                                                                            <DataGridTextColumn
                                                                                Width="*"
                                                                                Binding="{Binding SemiProduct.CostPrice, StringFormat={}{0:N2}}"
                                                                                ElementStyle="{StaticResource CenteredTextBlockStyle}" />
                                                                            <DataGridTextColumn
                                                                                Width="*"
                                                                                Binding="{Binding SemiProduct.TotalAmount, StringFormat={}{0:N2}}"
                                                                                ElementStyle="{StaticResource CenteredTextBlockStyle}" />
                                                                        </DataGrid.Columns>

                                                                    </DataGrid>
                                                                </DataTemplate>
                                                            </DataGridTemplateColumn.CellTemplate>
                                                        </DataGridTemplateColumn>
                                                    </DataGrid.Columns>

                                                </DataGrid>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <Border
                                Margin="5"
                                Padding="5"
                                BorderBrush="Gray"
                                BorderThickness="1">
                                <ItemsControl ItemsSource="{Binding IndependentSemiProducts}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border
                                                Padding="5,3"
                                                BorderBrush="LightGray"
                                                BorderThickness="0,0,0,1">


                                                <Grid Margin="15,0" Background="#EEE">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition MinWidth="100" MaxWidth="200" />
                                                        <!--  == Surat ==  -->

                                                        <ColumnDefinition Width="*" />
                                                        <!--  == Qolgan ma'lumotlar ==  -->
                                                    </Grid.ColumnDefinitions>

                                                    <!--  Surat  -->
                                                    <Image
                                                        MaxHeight="50"
                                                        HorizontalAlignment="Center"
                                                        Source="{Binding Image, Converter={StaticResource ImageFallbackConverter}}" />

                                                    <Grid Grid.Column="1">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="100" />
                                                            <!--  == O'lchami ==  -->

                                                            <ColumnDefinition Width="*" />
                                                            <!--  == Qolgan ma'lumotlar ==  -->
                                                        </Grid.ColumnDefinitions>

                                                        <TextBlock
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            FontWeight="Bold" />

                                                        <Grid Grid.Column="1">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*" />
                                                                <!--  == Soni ==  -->

                                                                <ColumnDefinition Width="*" />
                                                                <!--  == Birligi ==  -->

                                                                <ColumnDefinition Width="*" />
                                                                <!--  == Birlik narxi ==  -->

                                                                <ColumnDefinition Width="*" />
                                                                <!--  == Jami summa ==  -->
                                                            </Grid.ColumnDefinitions>


                                                            <!--  Soni  -->
                                                            <TextBlock
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Text="{Binding Quantity}" />

                                                            <!--  Birligi  -->
                                                            <TextBlock
                                                                Grid.Column="1"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Text="{Binding Measure.Name}" />

                                                            <!--  Narxi  -->
                                                            <TextBlock
                                                                Grid.Column="2"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Text="{Binding CostPrice, StringFormat={}{0:N2}}" />

                                                            <!--  Jami summa  -->
                                                            <TextBlock
                                                                Grid.Column="3"
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"
                                                                Text="{Binding TotalAmount, StringFormat={}{0:N2}}" />
                                                        </Grid>
                                                    </Grid>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>

                    <Border
                        Grid.Row="2"
                        BorderBrush="Gray"
                        BorderThickness="0,1,0,0">

                        <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">

                            <TextBlock
                                HorizontalAlignment="Right"
                                FontWeight="Bold"
                                Text="Ja'mi:  " />

                            <TextBlock
                                HorizontalAlignment="Right"
                                FontWeight="Bold"
                                Text="{Binding Invoice.TotalAmount}" />

                            <TextBlock
                                Margin="20,0"
                                HorizontalAlignment="Right"
                                FontWeight="Bold"
                                Text="{Binding Invoice.Currency.Code}" />

                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!--  SUBMIT BUTTON  -->
            <StackPanel
                Grid.Row="2"
                Margin="0,10,0,0"
                HorizontalAlignment="Right"
                Orientation="Horizontal">

                <Button
                    x:Name="submitButton"
                    md:ElevationAssist.Elevation="Dp24"
                    Background="{StaticResource SuccessButtonBackground}"
                    BorderBrush="{StaticResource SuccessButtonBorder}"
                    Command="{Binding SubmitCommand}"
                    Content="Yuborish"
                    Foreground="{StaticResource SuccessButtonForeground}" />
            </StackPanel>

        </Grid>
    </Border>
</Page>